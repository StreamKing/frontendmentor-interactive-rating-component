<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="./styles.css" />

    <title>Frontend Mentor | Interactive rating component</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  </head>
  <body>
    <!-- Rating state start -->

    <div class="outer-shell">
      <div class="rating-container">
        <img class="star-icon" src="./images/icon-star.svg" />
        <h1>How did we do?</h1>

        <form id="form">
          <fieldset>
            <legend>
              <p>
                Please let us know how we did with your support request. All
                feedback is appreciated to help us improve our offering!
              </p>
            </legend>
            <div class="controls">
              <div class="control-block">
                <input type="radio" id="rating-1" name="rating" value="1" />
                <label for="rating-1"> 1</label>
              </div>
              <div class="control-block">
                <input type="radio" id="rating-2" name="rating" value="2" />
                <label for="rating-2"> 2 </label>
              </div>
              <div class="control-block">
                <input type="radio" id="rating-3" name="rating" value="3" />
                <label for="rating-3"> 3</label>
              </div>
              <div class="control-block">
                <input type="radio" id="rating-4" name="rating" value="4" />
                <label for="rating-4"> 4</label>
              </div>
              <div class="control-block">
                <input type="radio" id="rating-5" name="rating" value="5" />
                <label for="rating-5"> 5</label>
              </div>
            </div>
            <button type="submit" class="submit-button">Submit</button>
          </fieldset>
        </form>
      </div>
    </div>

    <div class="thank-you-container invisible">
      <p>
        <img src="./images/illustration-thank-you.svg" />
      </p>
      <p class="submitted-rating"></p>
      <h1>Thank you!</h1>
      <p>
        We appreciate you taking the time to give a rating. If you ever need
        more support, don’t hesitate to get in touch!
      </p>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const rating = document.querySelector(".rating-container");
        const thankyou = document.querySelector(".thank-you-container");
        const outerShell = document.querySelector(".outer-shell");
        const form = document.querySelector("#form");
        const userRating = document.querySelector(".submitted-rating");
        let finalRating = 5;

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const inputs = Array.from(e.target[0].querySelectorAll("input"));
          const checkedInput = inputs.filter((input) => input.checked === true);
          finalRating = `You selected out ${checkedInput[0].value ?? 5} of 5`;
          userRating.textContent = finalRating;

          outerShell.removeChild(rating);
          outerShell.classList.add("thank-you-container-attached")
          outerShell.appendChild(thankyou);
          thankyou.classList.remove("invisible");
        });
      });
    </script>
  </body>
</html>
